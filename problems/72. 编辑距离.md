
## 72. ç¼–è¾‘è·ç¦»

ç»™ä½ ä¸¤ä¸ªå•è¯ word1 å’Œ word2ï¼Œ è¯·è¿”å›å°† word1 è½¬æ¢æˆ word2 æ‰€ä½¿ç”¨çš„æœ€å°‘æ“ä½œæ•°  ã€‚

ä½ å¯ä»¥å¯¹ä¸€ä¸ªå•è¯è¿›è¡Œå¦‚ä¸‹ä¸‰ç§æ“ä½œï¼š

* æ’å…¥ä¸€ä¸ªå­—ç¬¦
* åˆ é™¤ä¸€ä¸ªå­—ç¬¦
* æ›¿æ¢ä¸€ä¸ªå­—ç¬¦
 
 


<br>

### é¢˜ç›®é“¾æ¥

| é¢˜å· |  é¢˜è§£ | éš¾åº¦ |
| :-----| :---- | :----: |
| [72. ç¼–è¾‘è·ç¦»](https://leetcode.cn/problems/edit-distance/description/) |  [ã€ åŠ¨æ€è§„åˆ’ ã€å­—ç¬¦ä¸²DPè§£å†³ä¸€ä¼—å­—ç¬¦ä¸²åŒ¹é…é—®é¢˜](https://leetcode.cn/problems/edit-distance/solutions/1448569/by-flix-xaaz/) | <font color="red"> å›°éš¾ </font> |

<br>



### å‰è¨€
æ ¹æ®é¢˜æ„ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹ä¸€ä¸ªå•è¯è¿›è¡Œå¦‚ä¸‹ä¸‰ç§æ“ä½œï¼š
1. æ’å…¥ä¸€ä¸ªå­—ç¬¦
2. åˆ é™¤ä¸€ä¸ªå­—ç¬¦
3. æ›¿æ¢ä¸€ä¸ªå­—ç¬¦

æ³¨æ„åˆ°ï¼Œå¯¹äºç»™å®šçš„ä¸¤ä¸ªå•è¯`word1`å’Œ`word2`ï¼Œä¸ºå°†`word1`è½¬æ¢æˆ`word2`ï¼š
* åœ¨`word1`ä¸­æ’å…¥ä¸€ä¸ªå­—ç¬¦ç­‰ä»·äºåœ¨`word2`ä¸­åˆ é™¤ä¸€ä¸ªå­—ç¬¦ï¼›
* åœ¨`word2`ä¸­æ’å…¥ä¸€ä¸ªå­—ç¬¦ç­‰ä»·äºåœ¨`word1`ä¸­åˆ é™¤ä¸€ä¸ªå­—ç¬¦ï¼›

å› æ­¤ï¼Œå¯¹äº`word1`çš„æ’å…¥ã€åˆ é™¤ã€æ›¿æ¢ä¸‰ç§æ“ä½œæˆ‘ä»¬åªéœ€è¦è€ƒè™‘ä»¥ä¸‹ä¸‰ç§æƒ…å†µï¼š
1. `word1`ä¸­åˆ é™¤ä¸€ä¸ªå­—ç¬¦
2. `word2`ä¸­åˆ é™¤ä¸€ä¸ªå­—ç¬¦ï¼ˆç­‰ä»·äºåœ¨`word1`ä¸­æ’å…¥ä¸€ä¸ªå­—ç¬¦ï¼‰
3. `word1`ä¸­æ›¿æ¢ä¸€ä¸ªå­—ç¬¦


<br>



> è§£å†³æœ¬é¢˜åï¼Œå¯ç›´æ¥æ‹¿ä¸‹ç®€åŒ–ç‰ˆçš„æœ¬é¢˜ï¼š[**583. ä¸¤ä¸ªå­—ç¬¦ä¸²çš„åˆ é™¤æ“ä½œ**](https://leetcode-cn.com/problems/delete-operation-for-two-strings/)



---
**æ‹“å±•ï¼š**
* åŠ¨æ€è§„åˆ’ï¼Œå¯è§£å†³ä¸€ä¼—å­—ç¬¦ä¸²åŒ¹é…é—®é¢˜ï¼š

    | é¢˜å· |  é¢˜è§£ | éš¾åº¦ |
    | :-----| :---- | :----: |
    | [10. æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…](https://leetcode-cn.com/problems/regular-expression-matching/) |  [ çŠ¶æ€è½¬ç§»æ¨å¯¼ + æ»šåŠ¨ä¼˜åŒ– + æå‰ç»“æŸ](https://leetcode-cn.com/problems/regular-expression-matching/solution/by-flix-musv/) | å›°éš¾ |
    | [44. é€šé…ç¬¦åŒ¹é…](https://leetcode-cn.com/problems/wildcard-matching/) |   [çŠ¶æ€è½¬ç§»æ¨å¯¼ + æ»šåŠ¨ä¼˜åŒ– + æå‰ç»“æŸ](https://leetcode-cn.com/problems/wildcard-matching/solution/by-flix-d5bc/) | å›°éš¾ |
    | ï¼ˆæœ¬é¢˜ï¼‰ [72. ç¼–è¾‘è·ç¦»](https://leetcode-cn.com/problems/edit-distance/) |  [å­—ç¬¦ä¸²DPè§£å†³ä¸€ä¼—å­—ç¬¦ä¸²åŒ¹é…é—®é¢˜](https://leetcode-cn.com/problems/edit-distance/solution/by-flix-xaaz/) | å›°éš¾ |
    | [115. ä¸åŒçš„å­åºåˆ—](https://leetcode-cn.com/problems/distinct-subsequences/) |  [è®°å¿†åŒ–æœç´¢ã€ åŠ¨æ€è§„åˆ’ + æ»šåŠ¨æ•°ç»„ä¼˜åŒ– ](https://leetcode-cn.com/problems/distinct-subsequences/solution/dong-tai-gui-hua-dpmo-ban-jie-jue-yi-zho-if29/) | å›°éš¾ |
    | ï¼ˆæ¥è¿‘æœ¬é¢˜ï¼‰ [583. ä¸¤ä¸ªå­—ç¬¦ä¸²çš„åˆ é™¤æ“ä½œ](https://leetcode-cn.com/problems/delete-operation-for-two-strings/) |  [å­—ç¬¦ä¸²DPè§£å†³ä¸€ä¼—å­—ç¬¦ä¸²åŒ¹é…é—®é¢˜](https://leetcode-cn.com/problems/delete-operation-for-two-strings/solution/by-flix-lfnd/) | ä¸­ç­‰ |
    | [1143. æœ€é•¿å…¬å…±å­åºåˆ—](https://leetcode-cn.com/problems/longest-common-subsequence/) |  [å­—ç¬¦ä¸²DPè§£å†³ä¸€ä¼—å­—ç¬¦ä¸²åŒ¹é…é—®é¢˜](https://leetcode-cn.com/problems/longest-common-subsequence/solution/by-flix-6gy2/) | ä¸­ç­‰ |

<br>

---



### åŠ¨æ€è§„åˆ’

ã€ŒåŠ¨æ€è§„åˆ’ã€æ˜¯è§£å†³æ­¤ç±»å­—ç¬¦ä¸²æ“ä½œé—®é¢˜çš„é€šç”¨æ–¹æ³•ã€‚


**ä¸€. çŠ¶æ€å®šä¹‰**
å®šä¹‰ $dp[i][j]$ è¡¨ç¤º`word1`çš„å‰ $i$ ä¸ªå­—ç¬¦å’Œ`word2`çš„å‰ $j$ ä¸ªå­—ç¬¦çš„ç¼–è¾‘è·ç¦»ï¼ˆå³æœ€å°‘æ“ä½œæ•°ï¼‰ã€‚



**äºŒ. çŠ¶æ€è½¬ç§»**

è€ƒè™‘`word1`çš„å‰ $i$ ä¸ªå­—ç¬¦ä¸`word2`çš„å‰ $j$ ä¸ªå­—ç¬¦çš„ç¼–è¾‘è·ç¦»ï¼Œåœ¨æ­¤ä¹‹å‰ï¼š
* `word1`çš„å‰ $i-1$ ä¸ªå­—ç¬¦ä¸`word2`çš„å‰ $j-1$ ä¸ªå­—ç¬¦å·²ç»å®Œæˆç¼–è¾‘ï¼Œæ‰€éœ€æœ€å°æ“ä½œæ•°ä¸ºï¼š$dp[i-1][j-1]$ï¼›
* `word1`çš„å‰ $i-1$ ä¸ªå­—ç¬¦ä¸`word2`çš„å‰ $j$ ä¸ªå­—ç¬¦å·²ç»å®Œæˆç¼–è¾‘ï¼Œæ‰€éœ€æœ€å°æ“ä½œæ•°ä¸ºï¼š$dp[i-1][j]$ï¼›
* `word1`çš„å‰ $i$ ä¸ªå­—ç¬¦ä¸`word2`çš„å‰ $j-1$ ä¸ªå­—ç¬¦å·²ç»å®Œæˆç¼–è¾‘ï¼Œæ‰€éœ€æœ€å°æ“ä½œæ•°ä¸ºï¼š$dp[i][j-1]$ã€‚
    


$dp[i][j]$ ç”± $dp[i-1][j-1]$ã€$dp[i-1][j]$ å’Œ $dp[i][j-1]$ ä¸‰ç§çŠ¶æ€è½¬ç§»è€Œæ¥ï¼Œå¯èƒ½çš„çŠ¶æ€è½¬ç§»è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![LeetCode-583-1.png](https://pic.leetcode-cn.com/1650893775-maroRQ-LeetCode-583-1.png){:width=500}




åœ¨è¿›è¡ŒçŠ¶æ€è½¬ç§»æ—¶ï¼Œæˆ‘ä»¬è€ƒè™‘`word1`çš„ç¬¬ $i$ ä¸ªå­—ç¬¦ä¸`word2`çš„ç¬¬ $j$ ä¸ªå­—ç¬¦çš„åŒ¹é…æƒ…å†µï¼š

1. `word1[i] = word2[j]`ï¼Œæ­¤æ—¶ $dp[i][j]$ å¯ç”± $dp[i-1][j-1]$ ç›´æ¥è½¬ç§»è€Œæ¥ï¼Œæˆ‘ä»¬æœ‰ï¼š
    $$dp[i][j]= dp[i-1][j-1] \quad \quad \quad \quad \quad \quad ï¼ˆ1ï¼‰$$
    ![LeetCode-72-1.png](https://pic.leetcode-cn.com/1650885037-JfEpel-LeetCode-72-1.png){:width=450}

    å¯¹åº”çš„çŠ¶æ€æ›´æ–°è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
    
    ![LeetCode-72-4.png](https://pic.leetcode-cn.com/1650892386-CvjCOf-LeetCode-72-4.png){:width=500}

     > ğŸ¤” ä¸ºä»€ä¹ˆæ²¡æœ‰åƒå®˜æ–¹é¢˜è§£ä¸­é‚£æ ·æŠŠ $dp[i][j-1]+1$ å’Œ $dp[i-1][j]+1$ ä¹Ÿè€ƒè™‘è¿›æ¥å‘¢ï¼Ÿ<br>
    è¿™æ˜¯å› ä¸º $dp[i][j-1]$ ç›¸è¾ƒäº $dp[i-1][j-1]$ è€Œè¨€å…¶å®å°±æ˜¯åœ¨`word1[0,..,i-1]`åé¢æ·»åŠ äº†`word1[i]`ï¼Œè¿™æœ‰å¯èƒ½ä¼šå¢åŠ ä¸¤ä¸ªå­—ç¬¦ä¸²ä¹‹é—´çš„ç¼–è¾‘è·ç¦»ï¼ˆè·ç¦» $+1$ ï¼‰ï¼Œä¹Ÿæœ‰å¯èƒ½å‡å°‘ä¸¤ä¸ªå­—ç¬¦ä¸²ä¹‹é—´çš„ç¼–è¾‘è·ç¦»ï¼ˆè·ç¦» $-1$ ï¼‰ï¼Œå³ 
    > $$dp[i-1][j-1] - 1 \leq dp[i][j-1] \leq dp[i-1][j-1] + 1\ .$$
    > æ­¤æ—¶ï¼Œæ— è®ºå¦‚ä½•æˆ‘ä»¬éƒ½å¯ä»¥å¾—åˆ°ï¼š$dp[i-1][j-1] \leq dp[i][j-1] + 1$ã€‚
åŒç†ï¼Œæˆ‘ä»¬ä¹Ÿå¯å¾—åˆ°ï¼š$dp[i-1][j-1] \leq dp[i-1][j] + 1$ã€‚å› æ­¤ï¼Œ$dp[i-1][j-1]$ ä¸€å®šæ˜¯å½“å‰æ‰€éœ€è¦çš„æœ€å°‘æ“ä½œæ•°ã€‚




<br>

2. `word1[i] != word2[j]`ï¼Œæ­¤æ—¶æœ‰ä¸‰ç§å¯¹åº”çš„æ“ä½œ
    * `word1`ä¸­åˆ é™¤ä¸€ä¸ªå­—ç¬¦ï¼šåˆ é™¤`word1[i]`ï¼Œæ­¤æ—¶ï¼š
    $$dp[i][j]= dp[i-1][j] + 1$$
    * `word2`ä¸­åˆ é™¤ä¸€ä¸ªå­—ç¬¦ï¼ˆç­‰ä»·äºåœ¨`word1`ä¸­æ’å…¥ä¸€ä¸ªå­—ç¬¦ï¼‰ï¼šåˆ é™¤`word2[j]`ï¼ˆä¸‹å›¾å±•ç¤ºäº†æ­¤ç§æƒ…å†µï¼‰ï¼Œæ­¤æ—¶ï¼š
    $$dp[i][j]= dp[i][j-1] + 1$$
        
    ![LeetCode-72-2.png](https://pic.leetcode-cn.com/1650885121-hUzsCa-LeetCode-72-2.png){:width=450}
    * `word1`ä¸­æ›¿æ¢ä¸€ä¸ªå­—ç¬¦ï¼šå°†`word1[i]`æ›¿æ¢ä¸º`word2[j]`ï¼Œæ­¤æ—¶ï¼š
        $$dp[i][j]= dp[i-1][j-1] + 1$$
        ä¸‰ç§æƒ…å†µå–æœ€å°å€¼ï¼Œåˆ™æœ‰ï¼š
        $$dp[i][j]= \min\{ \ dp[i-1][j], \quad dp[i][j-1], \quad dp[i-1][j-1] \ \} + 1  \quadï¼ˆ2ï¼‰$$

        å¯¹åº”çš„çŠ¶æ€æ›´æ–°è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
    
    ![LeetCode-72-5.png](https://pic.leetcode-cn.com/1650892437-UVFqoz-LeetCode-72-5.png){:width=500}




---


**æ€»ç»“æ¥çœ‹**ï¼Œæœ€ç»ˆçš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹å¦‚ä¸‹ï¼š

$$
dp[i][j]= 
\begin{cases}
\quad \quad dp[i-1][j-1], & word1[i]=word2[j]  \\ 
\min\{ \ dp[i-1][j], \ dp[i][j-1], \ dp[i-1][j-1] \ \} + 1, & word1[i]\neq word2[j] \\ 
\end{cases} \quad (3)
$$



---

**ä¸‰. åˆå§‹åŒ–**

è®°`word1`çš„é•¿åº¦ä¸º $m$ï¼Œ`word2`çš„é•¿åº¦ä¸º $n$ ã€‚ä¸ºä¾¿äºçŠ¶æ€æ›´æ–°ï¼Œå‡å°‘å¯¹è¾¹ç•Œçš„åˆ¤æ–­ï¼Œåˆå§‹äºŒç»´ $dp$ æ•°ç»„ç»´åº¦ä¸º ${(m+1) \times(n+1)}$ ï¼Œå…¶ä¸­ç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—çš„çŠ¶æ€åˆ†åˆ«è¡¨ç¤ºå­—ç¬¦ä¸²`word1`å’Œ`word2`ä¸ºç©ºæ—¶çš„æƒ…å†µã€‚

æ˜¾ç„¶ï¼Œ$dp[0][0]=0$ã€‚å¯¹äºå…¶ä»– $dp[0][j]$ï¼Œ`word2[0,...,j]` ä¸ ç©ºå­—ç¬¦ `-` çš„ç¼–è¾‘è·ç¦»ä¸º $j$ï¼›åŒç†ï¼Œå¯¹äºå…¶ä»– $dp[i][0]$ï¼Œ`word1[0,...,i]` ä¸ ç©ºå­—ç¬¦ `-` çš„ç¼–è¾‘è·ç¦»ä¸º $i$ã€‚


> ä»¥ $word2=$ `"dabce"` ä¸ºä¾‹ï¼Œ$dp[0][*] = [0, 1, 2, 3, 4, 5]$ã€‚

> âš ï¸ éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œç”±äº $dp$ æ•°ç»„ç»´åº¦ä¸º ${(m+1) \times(n+1)}$ï¼Œåœ¨å…·ä½“ä»£ç å®ç°æ—¶ï¼Œ`word1[i-1]` å’Œ `word2[j-1]` æ‰æ˜¯åˆ†åˆ«è¡¨ç¤º `word1` å’Œ `word2` ä¸­çš„ç¬¬ $i$ å’Œç¬¬ $j$ ä¸ªå­—ç¬¦ã€‚



&nbsp;

---



### ä»£ç 


**1. äºŒç»´DP**
åŠ¨æ€è§„åˆ’çš„åŸºç¡€ä»£ç å¦‚ä¸‹ï¼š
```Python3 []
class Solution:
    def minDistance(self, word1: str, word2: str) -> int:

        m, n = len(word1), len(word2)
        if m * n == 0:      # word1æˆ–word2ä¸ºç©º 
            return m + n
        
        dp = [[0]*(n+1) for _ in range(m+1)]

        # è¾¹ç•ŒçŠ¶æ€
        for i in range(1, m+1):
            dp[i][0] = i
        for j in range(1, n+1):
            dp[0][j] = j

        # çŠ¶æ€æ›´æ–°
        for i in range(1, m+1):
            for j in range(1, n+1):
                if word1[i-1] == word2[j-1]:
                    dp[i][j] = dp[i-1][j-1]
                else:
                    dp[i][j] = min(dp[i][j-1], dp[i-1][j], dp[i-1][j-1]) + 1
        
        return dp[m][n]
```

<br>

**2. ä¸€ç»´DPï¼š** åŠ¨æ€è§„åˆ’çš„æ»šåŠ¨æ•°ç»„ä¼˜åŒ–

åœ¨ä¸Šé¢çš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸­ï¼Œæ¯ä¸€è¡Œçš„ $dp[i][j]$ çŠ¶æ€å€¼éƒ½åªä¸ä¸Šä¸€è¡Œï¼ˆæ­£ä¸Šæ–¹ï¼‰çš„ $dp[i-1][j]$ å’Œ ï¼ˆå·¦ä¸Šæ–¹ï¼‰çš„ $dp[i-1][j-1]$ï¼Œä»¥åŠæœ¬è¡Œï¼ˆå·¦æ–¹ï¼‰çš„$dp[i][j-1]$ çŠ¶æ€å€¼æœ‰å…³ï¼Œå› æ­¤å¯åŸºäº**æ»šåŠ¨æ•°ç»„**çš„æ€æƒ³è¿›è¡Œå¯¹çŠ¶æ€ç©ºé—´ $dp$ è¿›è¡Œä¼˜åŒ–è€Œçœå»ç¬¬ä¸€ç»´åº¦ã€‚




![LeetCode-72-3.png](https://pic.leetcode-cn.com/1650891755-jyiYTS-LeetCode-72-3.png){:width=500}



```Python3 []
class Solution:
    def minDistance(self, word1: str, word2: str) -> int:

        m, n = len(word1), len(word2)
        if m * n == 0:
            return m + n
        
        dp = [0] * (n+1)

        # è¾¹ç•ŒçŠ¶æ€
        for j in range(1, n+1):
            dp[j] = j
        
        # çŠ¶æ€æ›´æ–°
        for i in range(1, m+1):
            dp2 = [0] * (n+1)   # æ»šåŠ¨æ•°ç»„
            dp2[0] = i
            for j in range(1, n+1):
                if word1[i-1] == word2[j-1]:
                    dp2[j] = dp[j-1]
                else:
                    dp2[j] = min(dp2[j-1]+1, dp[j]+1, dp[j-1]+1)
            dp = dp2        # æ»šåŠ¨æ•°ç»„
            
        return dp[n]
```